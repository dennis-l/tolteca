# This file is created by hand and is append-only. Make sure to
# add entries to keep it in sync with any modifications to the
# items this file covers.
---
description: |-
    Note: this is a trimmed down version of the 10_cleaned_array_prop_table
    data, to be included as part of the tolteca python package data.

    The original description is as follows:

    These files are different from those in `../00_raw_from_NIST` in that:

    1. The column names are changed to the standard set of column names
       defined in this file (`$.cleaned_csv_columns`).

    2. A state column is added to indicate categories of detectors.
       In particular, dark detectors are denoted `dark`
       as the state.

    The created array property tables consist of a set of normalize columns
    that is defined in `$.array_prop_columns`. These are copied into the
    property table by the `create_array_prop_table.py` script.

    A set of meta data defined in `$.array_prop_meta` is also copied.

version: v1.0.1-tolteca_package_data
history:
    - author: Zhiyuan Ma
      date: 2021-04-26
      description: |-
          Included in the tolteca python package data
          Tagged as v1.0.0-tolteca_package_data
    - author: Zhiyuan Ma
      date: 2020-04-06
      description: |-
          Tagged as v1.0.0.
cleaned_csv_columns:
    - name: nw
      datatype: int64
      description: >-
          Network id (1-based).
      name_orig: Network Number
    - name: lpg
      datatype: string
      description: >-
          Pixel group label.
      name_orig: Pixel Group
    - name: lg
      datatype: int64
      description: >-
          Location id in a pixel group.
      name_orig: ID within group
    - name: pg
      datatype: int64
      description: >-
          Pixel type label.
      name_orig: Pixel Type
    - name: x
      datatype: float64
      description: >-
          x position on array.
      unit: um
      name_orig: X-location (um)
    - name: y
      datatype: float64
      description: >-
          y position on array.
      unit: um
      name_orig: Y-location (um)
    - name: f0
      datatype: float64
      description: >-
          The smaller frequency of the two detectors at this location.
      unit: GHz
      name_orig: freq_left (GHz)
    - name: f1
      datatype: float64
      description: >-
        The bigger frequency between the two detectors at this location.
      unit: GHz
      name_orig: freq_right (GHz)
    - name: state
      datatype: string
      description: >-
        A label denoting the category of the detector (dark, active, etc.).
      name_orig: null
      comment: |-
        This value is extracted from Pixel Type column for the
        1.4 and 2 mm arrays. For 1.1 mm array, it comes from the
        `270_locations_jay.csv` file.
files:
    - path: "index.yaml"
      description: >
          This file. It contains information on the content of this folder.
    - path: "a1100_prop.ecsv"
      description: |-
          The detector property table for the 1.1 mm array.
    - path: "a1400_prop.ecsv"
      description: |-
          The detector property table for the 1.4 mm array.
    - path: "a2000_prop.ecsv"
      description: |-
          The detector property table for the 2 mm array.

array_prop_meta:
    a1100:
        name: 'a1100'
        name_long: 'TolTEC 1.1 mm array'
    a1400:
        name: 'a1400'
        name_long: 'TolTEC 1.4 mm array'
    a2000:
        name: 'a2000'
        name_long: 'TolTEC 2 mm array'
array_prop_columns:
    - name: uid
      datatype: string
      description: >-
        Unique id composed as "nw_pg_loc_ori".
      meta:
        uid_regex: >-
          (?P<nw>\d{2})_(?P<pg>\d)_(?P<loc>\d{3})_(?P<ori>\d)
        uid_format: >-
          {nw:02d}_{pg:1d}_{loc:03d}_{ori:1d}
    - name: nw
      datatype: int64
      description: >-
        Network index. Unique across all three arrays.
    - name: pg
      datatype: int64
      description: >-
        Polarization group. 0 for "+", and 1 for "-".
    - name: loc
      datatype: int64
      description: >-
        Location index in polarization group.
    - name: ori
      datatype: int64
      description: >-
        Orientation index at given location. 0 is for the one with
        lower frequency, 1 is for the other.
    - name: fg
      datatype: int64
      description: >-
        Frequency group. From low frequency to hight the value goes as 0, 1, 2
        and 3. Detectors with fg 0 ("-") and 2 ("|") belongs to pg 0, and those
        with fg 1 ("\") and 3 ("/") belongs to pg 1.
    - name: design_group
      datatype: string
      description: >-
        The original detector group label from the design spec sheet.
    - name: i
      datatype: int64
      description: >-
        The vertical sorted (row) index of the detector on the array grid.
    - name: j
      datatype: int64
      description: >-
        The horizontal sorted (column) index of the detector on the array grid.
    - name: k
      datatype: int64
      description: >-
        The per-network frequency-wise sorted index of the detector.
    - name: x
      datatype: float64
      description: >-
        The x position designed.
      unit: um
    - name: y
      datatype: float64
      description: >-
        The y position designed.
      unit: um
    - name: f
      datatype: float64
      description: >-
        The frequency designed.
      unit: GHz
    - name: flag
      datatype: int64
      description: >-
        State flag (0 - active; 1 - dark; 64 - invalid; 128 - unknown).
      meta:
        flag_values:
          0:
            label: active
            description: The detector is active to optical power.
          1:
            label: dark
            description: The detector is not active to optical power.
          64:
            label: invalid
            description: This location dose not have a detector.
          128:
            label: unknown
            description: Any case that is not covered by other bits.
    - name: flag_summary
      datatype: string
      description: >-
        A summary of the set flag(s).
